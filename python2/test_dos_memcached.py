# -*- coding:utf-8 -*-

import socket

# with open('distinct_ip_1.txt') as f:
	# ip_list = f.read().split('\n')
	# for i in ip_list:
def test_dos_memcached(host):
	data = b'\0\x01\0\0\0\x01\0\0stats\r\n'
	try:
		sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
		sock.settimeout(2)
		# code = sock.connect_ex(("192.168.10.148", 11211))
		# print code
		sock.sendto(data, (host, 11211))
		
		# while True:
		recv_data = sock.recv(4096)
			# print len(recv_data)
			# temp =+ recv_data
		print "send", len(data), 'bytes'
		print "recv", len(recv_data), 'bytes from', host
		# print recv_data
	except Exception, e:
		print e

# with open('intra_ip_11211.txt') as f:
# 	ip_list = f.read().split('\n')
# 	for i in ip_list:
# 		test_dos_memcached(i)
test_dos_memcached("xapta.xa.gov.cn")






